<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speaking - Part 1</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="icon" href="img/favicon.png" type="image/x-icon">
</head>

<body>
    <header id="header-placeholder"></header>
    <div class="content-pusher">
        <div class="container">
            <div class="page-intro">
                <h1>Speaking - Part 1</h1>
                <p>Luy·ªán t·∫≠p tr·∫£ l·ªùi c√¢u h·ªèi v·ªõi ƒë·ªìng h·ªì b·∫•m gi·ªù</p>
            </div>
            <div class="explanation-box">
                <h3>üí° Ph∆∞∆°ng ph√°p luy·ªán t·∫≠p hi·ªáu qu·∫£</h3>
                <p>Trang web n√†y m√¥ ph·ªèng ƒëi·ªÅu ki·ªán thi b·∫±ng c√°ch cung c·∫•p c√¢u h·ªèi v√† ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c. V√¨ tr√¨nh duy·ªát
                    ch∆∞a h·ªó tr·ª£ ghi √¢m tr·ª±c ti·∫øp, h√£y l√†m theo c√°c b∆∞·ªõc sau:</p>
                <ul>
                    <li><strong>B∆∞·ªõc 1:</strong> M·ªü ·ª©ng d·ª•ng ghi √¢m tr√™n ƒëi·ªán tho·∫°i c·ªßa b·∫°n.</li>
                    <li><strong>B∆∞·ªõc 2:</strong> Tr√™n trang web, nh·∫•n n√∫t "‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi" v√† b·∫Øt ƒë·∫ßu ghi √¢m tr√™n
                        ƒëi·ªán tho·∫°i c√πng l√∫c.</li>
                    <li><strong>B∆∞·ªõc 3:</strong> Tr·∫£ l·ªùi c√¢u h·ªèi trong kho·∫£ng th·ªùi gian cho ph√©p. ƒê·ªìng h·ªì s·∫Ω gi√∫p b·∫°n
                        ki·ªÉm so√°t ƒë·ªô d√†i c√¢u tr·∫£ l·ªùi.</li>
                    <li><strong>B∆∞·ªõc 4:</strong> Sau khi ho√†n th√†nh, b·∫°n c√≥ th·ªÉ t·∫£i file ghi √¢m (MP3) l√™n c√°c c√¥ng c·ª• AI
                        nh∆∞ Google Studio, ChatGPT-4o, ho·∫∑c c√°c d·ªãch v·ª• s·ª≠a b√†i n√≥i chuy√™n d·ª•ng ƒë·ªÉ nh·∫≠n feedback.</li>
                </ul>
            </div>
            <!-- THAY TH·∫æ H·ªòP GI·∫¢I TH√çCH ·ªû ƒê√ÇY -->
            <div class="method-guide-card" style="margin-bottom: 30px;">
                <h2>Chi·∫øn l∆∞·ª£c thi Part 1</h2>
                <p>B·∫°n s·∫Ω tr·∫£ l·ªùi 3 c√¢u h·ªèi c√° nh√¢n, m·ªói c√¢u trong 30 gi√¢y. M·ª•c ti√™u l√† tr·∫£ l·ªùi tr√¥i ch·∫£y v√† ph√°t tri·ªÉn
                    √Ω m·ªôt c√°ch t·ª± nhi√™n.</p>

                <h4>Chi·∫øn l∆∞·ª£c trong ph√≤ng thi:</h4>
                <ul>
                    <li><strong>ƒê·ª´ng lo l·∫Øng v·ªÅ th·ªùi gian:</strong> 30 gi√¢y l√† ƒë·ªß d√†i. Khi th·∫•y ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c, h√£y
                        gi·ªØ b√¨nh tƒ©nh, h√≠t th·ªü s√¢u v√† t·∫≠p trung v√†o c√¢u h·ªèi.</li>
                    <li><strong>S·ª≠ d·ª•ng "B√†n tay 5W1H":</strong> N·∫øu "b√≠" √Ω, h√£y x√≤e b√†n tay ra v√† t·ª± h·ªèi:
                        <ul>
                            <li><strong>What?</strong> (C√°i g√¨?)</li>
                            <li><strong>Where?</strong> (·ªû ƒë√¢u?)</li>
                            <li><strong>When?</strong> (Khi n√†o?)</li>
                            <li><strong>Who?</strong> (V·ªõi ai?)</li>
                            <li><strong>Why?</strong> (T·∫°i sao?)</li>
                            <li><strong>How?</strong> (Nh∆∞ th·∫ø n√†o?)</li>
                        </ul>
                        Ch·ªâ c·∫ßn tr·∫£ l·ªùi 2-3 trong s·ªë c√°c c√¢u h·ªèi n√†y l√† b·∫°n ƒë√£ c√≥ m·ªôt c√¢u tr·∫£ l·ªùi ƒë·∫ßy ƒë·ªß.
                    </li>
                    <li><strong>ƒê·ª´ng c·ªë nh·ªõ, h√£y s√°ng t·∫°o:</strong> B·∫°n kh√¥ng c·∫ßn ph·∫£i k·ªÉ ƒë√∫ng 100% s·ª± th·∫≠t.</li>
                    <li> H√£y tho·∫£i m√°i <strong>"b·ªãa" ra m·ªôt c√¢u chuy·ªán ng·∫Øn</strong> sao cho n√≥ ph√π h·ª£p v√† d·ªÖ tr·∫£ l·ªùi
                        nh·∫•t v·ªõi c√¢u h·ªèi ƒë∆∞·ª£c ƒë·ªÅ ra. Gi√°m kh·∫£o ch·ªâ quan t√¢m ƒë·∫øn kh·∫£ nƒÉng s·ª≠ d·ª•ng ti·∫øng Anh c·ªßa b·∫°n,
                        kh√¥ng ph·∫£i t√≠nh x√°c th·ª±c c·ªßa c√¢u chuy·ªán.</li>
                </ul>
            </div>
            <div class="page-intro">
                <p>Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p</p>
            </div>
            <!-- B·∫¢NG ƒêI·ªÄU KHI·ªÇN CH·ªåN CH·ª¶ ƒê·ªÄ -->
            <div id="topic-selector-grid" class="topic-grid">
                <!-- 37 n√∫t s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông ch√®n v√†o ƒë√¢y -->
            </div>

            <main id="speaking-container">
                <!-- Ch·ªâ m·ªôt b√†i t·∫≠p ƒë∆∞·ª£c hi·ªÉn th·ªã t·∫°i m·ªôt th·ªùi ƒëi·ªÉm -->
            </main>
        </div>
        <footer id="footer-placeholder"></footer>
    </div>
    <script src="js/main.js"></script>
    <script src="js/data-speaking-part1.js"></script>
    <!-- Trong file speaking_part1.html -->
     <!-- === THAY TH·∫æ TO√ÄN B·ªò SCRIPT C≈® B·∫∞NG SCRIPT M·ªöI N√ÄY === -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const selectorContainer = document.getElementById('topic-selector-grid');
            const contentContainer = document.getElementById('speaking-container');
            const topics = speakingPart1Data;

            if (!topics || topics.length === 0) {
                contentContainer.innerHTML = `<p class="error">Kh√¥ng c√≥ d·ªØ li·ªáu cho Speaking Part 1.</p>`;
                return;
            }

            // --- GIAI ƒêO·∫†N 1: CH·ªà T·∫†O C√ÅC N√öT B·∫§M ---
            topics.forEach((topic, index) => {
                const button = document.createElement('button');
                button.className = 'topic-selector-btn';
                button.textContent = `Ch·ªß ƒë·ªÅ ${index + 1}`;
                button.dataset.index = index; // L∆∞u tr·ªØ ch·ªâ s·ªë c·ªßa ch·ªß ƒë·ªÅ
                selectorContainer.appendChild(button);
            });

            const allButtons = selectorContainer.querySelectorAll('.topic-selector-btn');
            let activeTimer = null;

            // --- GIAI ƒêO·∫†N 2: H√ÄM T·∫†O CARD "THEO Y√äU C·∫¶U" ---
            function renderTopicCard(index) {
                // X√≥a n·ªôi dung c≈© trong container
                contentContainer.innerHTML = '';
                
                // L·∫•y d·ªØ li·ªáu c·ªßa ch·ªß ƒë·ªÅ ƒë∆∞·ª£c ch·ªçn
                const topic = topics[index];
                if (!topic) return;

                // T·∫°o card n·ªôi dung
                const card = document.createElement('div');
                card.className = 'quiz-card speaking-card active'; // Th√™m active ƒë·ªÉ n√≥ hi·ªán ra ngay
                const prompt = topic.prompt;

                card.innerHTML = `
                    <div class="card-header">
                        <h2>${topic.title}</h2>
                    </div>
                    <div class="prompt-container">
                        <p class="prompt-question"><strong>C√¢u h·ªèi:</strong> ${prompt.question}</p>
                        <h4>T·ª± luy·ªán t·∫≠p:</h4>
                        <div class="timer-controls">
                            <button class="action-btn start-timer-btn" data-duration="${prompt.duration}">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi (B·∫•m gi·ªù)</button>
                            <div class="timer-display"><span class="time-left">${prompt.duration}</span>s</div>
                        </div>
                        <div class="card-actions" style="margin-top: 25px; border-top: 1px dashed var(--border-color); padding-top: 25px;">
                            <button class="action-btn show-sample-btn">üìñ Xem c√¢u tr·∫£ l·ªùi m·∫´u</button>
                        </div>
                        <div class="sample-answer-wrapper" style="display: none;">
                            <div class="sample-answer-container">
                                <h4>Nghe & ƒê·ªçc c√¢u tr·∫£ l·ªùi m·∫´u:</h4>
                                <div class="audio-player-container"><audio controls class="custom-audio-player" src="${topic.audioSrc}"></audio></div>
                                <div class="sample-answer"><p>${prompt.sampleAnswer}</p></div>
                            </div>
                        </div>
                    </div>
                `;
                // Ch√®n card v·ª´a t·∫°o v√†o container
                contentContainer.appendChild(card);
            }

            // G√ÅN S·ª∞ KI·ªÜN CLICK CHO C√ÅC N√öT
            selectorContainer.addEventListener('click', function (e) {
                if (e.target.classList.contains('topic-selector-btn')) {
                    // B·ªè active ·ªü t·∫•t c·∫£ c√°c n√∫t
                    allButtons.forEach(btn => btn.classList.remove('active'));
                    // Th√™m active cho n√∫t ƒë∆∞·ª£c nh·∫•n
                    e.target.classList.add('active');
                    // L·∫•y index v√† render card t∆∞∆°ng ·ª©ng
                    const topicIndex = parseInt(e.target.dataset.index, 10);
                    renderTopicCard(topicIndex);
                }
            });

            // M·∫∂C ƒê·ªäNH HI·ªÇN TH·ªä CH·ª¶ ƒê·ªÄ ƒê·∫¶U TI√äN KHI T·∫¢I TRANG
            if (allButtons.length > 0) {
                allButtons[0].classList.add('active');
                renderTopicCard(0);
            }

            // LOGIC CHO TIMER V√Ä N√öT XEM ƒê√ÅP √ÅN (ho·∫°t ƒë·ªông b√™n trong card)
            contentContainer.addEventListener('click', function (e) {
                if (e.target.classList.contains('start-timer-btn')) {
                    if (activeTimer) {
                        clearInterval(activeTimer.intervalId);
                        activeTimer.button.textContent = '‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu tr·∫£ l·ªùi (B·∫•m gi·ªù)';
                        activeTimer.button.disabled = false;
                        activeTimer.timeLeftEl.textContent = activeTimer.button.dataset.duration;
                        if (activeTimer.button === e.target) {
                            activeTimer = null;
                            return;
                        }
                    }
                    const button = e.target;
                    const duration = parseInt(button.dataset.duration, 10);
                    const timerDisplay = button.nextElementSibling;
                    const timeLeftEl = timerDisplay.querySelector('.time-left');
                    let timeLeft = duration;
                    timeLeftEl.textContent = timeLeft;
                    button.textContent = '‚è±Ô∏è ƒêang ƒë·∫øm ng∆∞·ª£c...';
                    button.disabled = true;
                    const intervalId = setInterval(() => {
                        timeLeft--;
                        timeLeftEl.textContent = timeLeft;
                        if (timeLeft <= 0) {
                            clearInterval(intervalId);
                            button.textContent = 'H·∫øt gi·ªù! B·∫Øt ƒë·∫ßu l·∫°i';
                            button.disabled = false;
                            activeTimer = null;
                        }
                    }, 1000);
                    activeTimer = { button, intervalId, timeLeftEl };
                }
                if (e.target.classList.contains('show-sample-btn')) {
                    const button = e.target;
                    const wrapper = button.closest('.card-actions').nextElementSibling;
                    const isVisible = wrapper.style.display === 'block';
                    wrapper.style.display = isVisible ? 'none' : 'block';
                    button.textContent = isVisible ? 'üìñ Xem c√¢u tr·∫£ l·ªùi m·∫´u' : 'üôà ·∫®n c√¢u tr·∫£ l·ªùi m·∫´u';
                }
            });
        });
    </script>
</body>

</html>